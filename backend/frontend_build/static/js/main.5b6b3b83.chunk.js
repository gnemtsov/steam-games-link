(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,a){},140:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(32),i=a.n(s),o=a(12),c=a(22),u=a(29);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(76),a(93),a(95),a(100);var l=a(9),m=a(10),p=a(13),d=a(11),h=a(14),_=a(24),f=a.n(_),v="R_START_LOAD_MULTIPLAYER_GAMES",g="R_FINISH_LOAD_MULTIPLAYER_GAMES",E="R_START_USER_ADD",b="R_FINISH_USER_ADD",y="R_USER_DELETE",C="R_DO_INTERSECTION",O="S_LOAD_MULTIPLAYER_GAMES",j="S_USER_ADD",k="S_USER_DELETE",S=a(65),U=a.n(S),N=function(e){return r.a.createElement("div",{className:U.a.Backdrop,onClick:e.clickHandler})},L=a(27),R=a.n(L),w=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:R.a.Popup,role:"dialog","aria-modal":"true",onKeyDown:function(t){return 27===t.keyCode&&e.closeHandler(t)}},r.a.createElement("header",{className:R.a.PopupHeader},r.a.createElement("div",{className:R.a.PopupTitle},e.title),r.a.createElement("button",{type:"button",className:R.a.Close,onClick:e.closeHandler})),r.a.createElement("div",{className:R.a.PopupBody},e.children)),r.a.createElement(N,{show:!0,clickHandler:e.closeHandler}))};w.defaultProps={title:"Popup"};var P=w,x=a(25),M=a(66),A=a.n(M),I=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).state={caught:!1},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({caught:!0}),this.props.showError("Something went wrong!")}},{key:"render",value:function(){return this.state.caught?r.a.createElement("div",{className:A.a.BrokenComponent},"Broken :("):r.a.createElement(r.a.Fragment,null,this.props.children)}}]),t}(n.Component),T=Object(o.b)(null,function(e){return{showError:function(t){return e({type:"R_SHOW_ERROR",payload:{errorMessage:t}})}}})(I),G=a(20),H=a(16),D=a.n(H),B=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).state={value:"",submitValue:"",tip:!1,tipHighlightUrl:!1},a.inputRef=r.a.createRef(),a.handleChange=a.handleChange.bind(Object(G.a)(Object(G.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(G.a)(Object(G.a)(a))),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.inputRef.current.focus()}},{key:"handleChange",value:function(e){var t=e.target.value,a=/steamcommunity\.com\/id\/([^\/]+)$/i.exec(t);this.setState({value:t,submitValue:null===a?t:a[1],tip:""!==t,tipHighlightUrl:null!==a})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state.submitValue;this.props.submitHandler(t),this.inputRef.current.focus(),this.setState({value:"",submitValue:"",tip:!1,tipHighlightUrl:!1})}},{key:"render",value:function(){var e=[D.a.Tip];return this.state.tip&&e.push(D.a.Show),r.a.createElement("form",{className:D.a.Container,onSubmit:this.handleSubmit},r.a.createElement("div",{className:D.a.InputContainer},r.a.createElement("input",{type:"text",className:D.a.Input,ref:this.inputRef,tabIndex:"1",value:this.state.value,placeholder:"Username or Steam community url",onChange:this.handleChange}),r.a.createElement("div",{className:e.join(" ")},r.a.createElement("span",{className:this.state.tipHighlightUrl?"":D.a.Highlight},"[username]")," or ",r.a.createElement("span",{className:this.state.tipHighlightUrl?D.a.Highlight:""},"steamcommunity.com/id/[username]"))),r.a.createElement("button",{type:"submit",className:D.a.Button,tabIndex:"2",disabled:""===this.state.value},"ADD"))}}]),t}(n.Component),F=a(40),W=a.n(F),V=function(e){return r.a.createElement("div",{className:W.a.Loader+(e.freeze?" "+W.a.Freeze:"")},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))},Y=a(6),z=a.n(Y),K=r.a.memo(function(e){var t=r.a.createRef(),a=[z.a.Container],n=[z.a.Vanityurl],s=r.a.createElement("img",{className:z.a.Avatar,src:e.avatar,alt:e.name});return e.isLoading&&(a.push(z.a.Loading),n.push(z.a.Name),s=r.a.createElement(V,null)),e.errorMessage&&(a.push(z.a.Failed),s=r.a.createElement(V,{freeze:!0})),e.shake&&a.push(z.a.Shake),r.a.createElement("div",{className:a.join(" "),onTouchEnd:function(e){document.hasFocus()&&document.activeElement===t.current||(e.preventDefault(),t.current.focus())}},r.a.createElement("div",{key:"avatar-container",className:z.a.AvatarContainer},s),r.a.createElement("div",{key:"names-container",className:z.a.NamesContainer},r.a.createElement("div",{className:z.a.Name},e.name),r.a.createElement("div",{className:z.a.ErrorMessage},e.errorMessage),r.a.createElement("div",{className:n.join(" ")},e.vanityurl)),r.a.createElement("button",{key:"remove",className:z.a.Remove,tabIndex:e.tabIndex,ref:t,onClick:e.clickHandler,onKeyDown:function(e){13===e.keyCode&&(e.preventDefault(),e.currentTarget.click())}}))}),q=a(30),J=a.n(q),Q=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={shakingUsers:[]},a.addShakingUser=function(e){a.setState(function(t){var n=t.shakingUsers.filter(function(t){return t.vanityurl!==e}),r=setTimeout(function(){a.removeShakingUser(e)},1e3);return n.push({vanityurl:e,timerId:r}),{shakingUsers:n}})},a.removeShakingUser=function(e){a.setState(function(t){return{shakingUsers:t.shakingUsers.filter(function(t){return t.vanityurl!==e})}})},a.handleUserAdd=function(e){a.props.users.map(function(e){return e.vanityurl}).includes(e)?a.addShakingUser(e):a.props.userAdd(e)},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentWillUnmount",value:function(){this.state.shakingUsers.forEach(function(e){var t=e.timerId;return clearTimeout(t)})}},{key:"render",value:function(){var e=this;return r.a.createElement("header",{className:J.a.Container},r.a.createElement("div",{className:J.a.Controls},r.a.createElement("h1",{className:J.a.Title},this.props.title),r.a.createElement(T,null,r.a.createElement(B,{submitHandler:this.handleUserAdd}))),r.a.createElement(x.TransitionGroup,{className:J.a.List},this.props.users.map(function(t,a){var n=10+a,s=e.state.shakingUsers.map(function(e){return e.vanityurl}).includes(t.vanityurl);return r.a.createElement(x.CSSTransition,{key:t.vanityurl,timeout:500,enter:!1,classNames:"fade"},r.a.createElement(T,null,r.a.createElement(K,Object.assign({},t,{tabIndex:n,shake:s,clickHandler:function(){return e.props.userDelete(a)}}))))})))}}]),t}(n.Component);Q.defaultProps={title:"Steam Games Link"};var X=Object(o.b)(function(e){return{users:e.users}},function(e){return{userAdd:function(t){return e({type:j,payload:{vanityurl:t}})},userDelete:function(t){return e({type:k,payload:{index:t}})}}})(Q),Z=a(41),$=a.n(Z),ee=function(e){return r.a.createElement("div",{className:$.a.Container},r.a.createElement("img",{src:"http://media.steampowered.com/steamcommunity/public/images/apps/".concat(e.appId,"/").concat(e.logo,".jpg"),alt:""}),r.a.createElement("div",{className:$.a.Name},e.name))},te=a(19),ae=a.n(te),ne=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return!e.isCalculating}},{key:"render",value:function(){var e=this,t=null;return t=this.props.isMPGamesStaled?r.a.createElement("div",{className:ae.a.Error},"Failed to fetch all multiplayer games list from SteamSpyAPI. Try later."):0===this.props.userCount?r.a.createElement("div",{className:ae.a.Placeholder},"Common multiplayer games. Start by adding a user."):1===this.props.userCount?r.a.createElement("div",{className:ae.a.Placeholder},"Add another user to see the list of games."):this.props.intersection.length>0?r.a.createElement("div",{className:ae.a.List},this.props.intersection.map(function(t){return r.a.createElement(ee,{key:t,appId:t,name:e.props.games[t].name,logo:e.props.games[t].logo})})):r.a.createElement("div",{className:ae.a.Placeholder},"These users don't have any common multiplayer games."),r.a.createElement("main",{className:ae.a.Wrapper},r.a.createElement(x.TransitionGroup,{className:ae.a.Container},r.a.createElement(x.CSSTransition,{key:this.props.uniqueKey,timeout:800,classNames:"slide"},r.a.createElement("div",null,t))))}}]),t}(n.Component),re=Object(o.b)(function(e){return{isMPGamesStaled:e.isMPGamesStaled,games:e.games,userCount:e.users.filter(function(e){return void 0!==e.steamId}).length,uniqueKey:e.users.map(function(e){return e.steamId||""}).join(""),intersection:e.intersection,isCalculating:e.isCalculating}})(ne),se=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.resInterceptor=f.a.interceptors.response.use(function(e){return e},function(t){if(t.response&&void 0!==t.response.data){var a=t.response.data;if(["User not found","Not a public profile"].includes(a))return Promise.reject(a)}e.props.showError("Something went wrong!")}),this.props.loadMultiplayerGames()}},{key:"componentWillUnmount",value:function(){f.a.interceptors.response.eject(this.resInterceptor)}},{key:"render",value:function(){var e=null;return null!==this.props.errorMessage&&(e=r.a.createElement(P,{title:"Error",closeHandler:this.props.hideError},r.a.createElement("div",{className:"classes.ErrorContainer"},r.a.createElement("span",{className:"classes.ErrorMessage"},this.props.errorMessage)))),r.a.createElement(r.a.Fragment,null,e,r.a.createElement(X,null),r.a.createElement(re,null))}}]),t}(n.Component),ie=Object(o.b)(function(e){return{errorMessage:e.errorMessage}},function(e){return{showError:function(t){return e({type:"R_SHOW_ERROR",payload:{errorMessage:t}})},hideError:function(){return e({type:"R_HIDE_ERROR"})},loadMultiplayerGames:function(){return e({type:O})}}})(se),oe=a(5),ce={multiPlayerGames:[],games:{},users:[],intersection:[],isMPGamesLoading:!1,isMPGamesStaled:!1,isCalculating:!1,errorMessage:null},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return function(e){return Object(oe.a)({},e,{isMPGamesLoading:!0})}(e);case g:return function(e,t){return Object(oe.a)({},e,{multiPlayerGames:t.payload,isMPGamesLoading:!1,isMPGamesStaled:!1})}(e,t);case E:return function(e,t){var a=t.payload.vanityurl,n=e.users.slice();return n.push({isLoading:!0,vanityurl:a}),Object(oe.a)({},e,{users:n})}(e,t);case b:return function(e,t){var a,n=t.payload;void 0!==n.games&&(a=Object.keys(n.games));var r=e.users.map(function(e){return e.vanityurl===n.vanityurl?Object(oe.a)({},n,{games:a,isLoading:!1}):e}),s={};void 0!==a&&a.forEach(function(e){s[e]=Object(oe.a)({appId:e},n.games[e],{nameLowerCase:n.games[e].name.toLowerCase()})});var i=Object(oe.a)({},e.games,s);return Object(oe.a)({},e,{games:i,users:r,isCalculating:void 0===n.errorMessage,isMPGamesStaled:e.isMPGamesLoading})}(e,t);case y:return function(e,t){var a=t.payload.index,n=e.users.slice();return n.splice(a,1),Object(oe.a)({},e,{users:n,isCalculating:!0})}(e,t);case C:return function(e){var t=[],a=e.users.filter(function(e){return void 0!==e.games}).map(function(e){return e.games});return a.length>1&&(a.push(e.multiPlayerGames),(t=a.reduce(function(e,t){return e.filter(function(e){return t.includes(e)})})).sort(function(t,a){return e.games[t].nameLowerCase>e.games[a].nameLowerCase?1:e.games[t].nameLowerCase<e.games[a].nameLowerCase?-1:0})),Object(oe.a)({},e,{intersection:t,isCalculating:!1})}(e);case"R_SHOW_ERROR":return function(e,t){var a=t.payload.errorMessage;return Object(oe.a)({},e,{errorMessage:a})}(e,t);case"R_HIDE_ERROR":return function(e){return Object(oe.a)({},e,{errorMessage:null})}(e);default:return e}},le=a(17),me=a.n(le),pe=a(3),de=me.a.mark(ve),he=me.a.mark(ge),_e=me.a.mark(Ee),fe=me.a.mark(be);function ve(){var e;return me.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(pe.d)({type:v});case 2:return t.next=4,Object(pe.b)(f.a.get,"/multiplayergames");case 4:if(void 0!==(e=t.sent)){t.next=8;break}return t.next=8,Object(pe.c)();case 8:return t.next=10,Object(pe.d)({type:g,payload:e.data});case 10:case"end":return t.stop()}},de,this)}function ge(e){var t,a;return me.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload.vanityurl,n.next=3,Object(pe.d)({type:E,payload:{vanityurl:t}});case 3:return n.prev=3,n.next=6,Object(pe.b)(f.a.get,"/userownedgames/".concat(t));case 6:a=n.sent,n.next=15;break;case 9:return n.prev=9,n.t0=n.catch(3),n.next=13,Object(pe.d)({type:b,payload:{errorMessage:n.t0,vanityurl:t}});case 13:return n.next=15,Object(pe.c)();case 15:if(void 0!==a){n.next=18;break}return n.next=18,Object(pe.c)();case 18:return n.next=20,Object(pe.d)({type:b,payload:Object(oe.a)({},a.data,{vanityurl:t})});case 20:return n.next=22,Object(u.b)(500);case 22:return n.next=24,Object(pe.d)({type:C});case 24:case"end":return n.stop()}},he,this,[[3,9]])}function Ee(e){var t;return me.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload.index,a.next=3,Object(pe.d)({type:y,payload:{index:t}});case 3:return a.next=5,Object(u.b)(500);case 5:return a.next=7,Object(pe.d)({type:C});case 7:case"end":return a.stop()}},_e,this)}function be(){return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pe.a)([Object(pe.e)(O,ve),Object(pe.e)(j,ge),Object(pe.e)(k,Ee)]);case 2:case"end":return e.stop()}},fe,this)}var ye=c.c,Ce=Object(u.a)(),Oe=Object(c.d)(ue,ye(Object(c.a)(Ce)));Ce.run(be),i.a.render(r.a.createElement(o.a,{store:Oe},r.a.createElement(ie,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},16:function(e,t,a){e.exports={Container:"UserAdd_Container__1XIsc",InputContainer:"UserAdd_InputContainer__ssjY1",Input:"UserAdd_Input__Tn5iZ",Tip:"UserAdd_Tip__21YQ-",Show:"UserAdd_Show__Saiwe",Highlight:"UserAdd_Highlight__3Wq6K",Button:"UserAdd_Button__StxZA",Loading:"UserAdd_Loading__vt8S1",dots:"UserAdd_dots__4zp7O"}},19:function(e,t,a){e.exports={Wrapper:"GamesList_Wrapper__3XHDG",Container:"GamesList_Container__1Q530",Placeholder:"GamesList_Placeholder__2lcws",Error:"GamesList_Error__5QhRf",List:"GamesList_List__3s5sR"}},27:function(e,t,a){e.exports={Popup:"Popup_Popup__1XPdd",openPopup:"Popup_openPopup__oy1fu",PopupHeader:"Popup_PopupHeader__CbTo5",PopupTitle:"Popup_PopupTitle__3IBb8",Close:"Popup_Close__1X-Mq",PopupBody:"Popup_PopupBody__1Q4dR"}},30:function(e,t,a){e.exports={Container:"UsersList_Container__1QRA_",Title:"UsersList_Title__3M-iX",List:"UsersList_List__4JuhO",Controls:"UsersList_Controls__2EoF-"}},40:function(e,t,a){e.exports={Loader:"Spinner_Loader__1EjO9",Freeze:"Spinner_Freeze__25Wu1"}},41:function(e,t,a){e.exports={Container:"GameCard_Container__13Jts",Name:"GameCard_Name__2mhtZ"}},6:function(e,t,a){e.exports={Container:"UserCard_Container__1FUWk",Shake:"UserCard_Shake__254T7",shake:"UserCard_shake__mg-Bu",AvatarContainer:"UserCard_AvatarContainer__1FrYE",NamesContainer:"UserCard_NamesContainer__1yEwU",Name:"UserCard_Name__1pELW",Loading:"UserCard_Loading__3ljcK",Failed:"UserCard_Failed__dJR1v",Vanityurl:"UserCard_Vanityurl__372L1",ErrorMessage:"UserCard_ErrorMessage__3NqL1",Remove:"UserCard_Remove__2SokG"}},65:function(e,t,a){e.exports={Backdrop:"Backdrop_Backdrop__3G-Di"}},66:function(e,t,a){e.exports={BrokenComponent:"ErrorBoundary_BrokenComponent__2Y-jb"}},67:function(e,t,a){e.exports=a(140)}},[[67,2,1]]]);
//# sourceMappingURL=main.5b6b3b83.chunk.js.map